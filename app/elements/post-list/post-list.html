<polymer-element name="post-list" attributes="count, type">
  <template>
    <link rel="stylesheet" href="post-list.css">
    <template repeat="{{ entry in entries }}" if="{{entries.length>0}}">
      <template if="{{ type=='post' }}">
        <post-card entry="{{entry}}"></post-card>
      </template>
    </template>
    <template if="{{entries.length==0}}">
    <div id="spinner" horizontal center-justified layout>
      <shadow-spinner></shadow-spinner>
    </div>
    </template>
  </template>
  <script>
    (function () {
      Polymer({
        publish: {
          entries: [],
          count: 0,
          type: ''
        },
        entriesChanged: function()
        {
          console.log(this.type, this.entries);
        },
        attached: function()
        {
          switch(this.type)
          {
            case 'post':
              var scope = this;
              var el = new PostService();
              el.getPosts(function(entries)
              {
                scope.entries = entries;
              });
              xdPrepend(document.body, el);
            break;
          }
        },
        entriesChanged: function()
        {
          this.count = this.entries.length;
        }
      });
    })();
  </script>
</polymer-element>
